from fpdf import FPDF

pdf = FPDF()
pdf.set_auto_page_break(auto=True, margin=15)
pdf.add_page()

# Título
pdf.set_font("Arial", "B", 16)
pdf.cell(0, 10, "Pipeline de Dados com IoT e Docker", 0, 1, "C")
pdf.ln(5)

# Seção 1: Contextualização
pdf.set_font("Arial", "B", 14)
pdf.cell(0, 10, "1. Contextualização do Projeto", 0, 1)
pdf.set_font("Arial", "", 12)
pdf.multi_cell(0, 8, 
    "O projeto tem como objetivo processar leituras de temperatura de dispositivos IoT, "
    "armazenar essas informações em um banco de dados PostgreSQL usando Docker, "
    "e disponibilizar visualizações interativas em um dashboard Streamlit para análise de dados."
)
pdf.ln(3)

# Seção 2: Passos realizados
pdf.set_font("Arial", "B", 14)
pdf.cell(0, 10, "2. Passos Realizados", 0, 1)
pdf.set_font("Arial", "", 12)
pdf.multi_cell(0, 8, 
    "A seguir, os principais passos do desenvolvimento:\n\n"
    "1. Configuração do ambiente: Python, Docker, bibliotecas pandas, SQLAlchemy, Streamlit e Plotly.\n"
    "2. Criação do container PostgreSQL:\n"
    "   docker run --name postgres-iot -e POSTGRES_PASSWORD=sua_senha -p 5432:5432 -d postgres\n"
    "3. Inserção dos dados CSV limpos no banco via psql (\copy).\n"
    "4. Criação das views SQL: avg_temp_por_dispositivo, leituras_por_hora, temp_max_min_por_dia.\n"
    "5. Construção do dashboard Streamlit, exibindo gráficos interativos."
)
pdf.ln(3)

# Seção 3: Explicação das views SQL
pdf.set_font("Arial", "B", 14)
pdf.cell(0, 10, "3. Explicação das Views SQL", 0, 1)
pdf.set_font("Arial", "", 12)
pdf.multi_cell(0, 8,
    "- avg_temp_por_dispositivo: média de temperatura por dispositivo, útil para identificar aquecimento anormal.\n"
    "- leituras_por_hora: quantidade de leituras por hora, identifica padrões ou horários críticos.\n"
    "- temp_max_min_por_dia: temperaturas máxima e mínima por dia, facilita monitoramento diário e alertas."
)
pdf.ln(3)

# Seção 4: Prints do dashboard
pdf.set_font("Arial", "B", 14)
pdf.cell(0, 10, "4. Prints do Dashboard", 0, 1)
pdf.set_font("Arial", "", 12)
pdf.multi_cell(0, 8,
    "Insira aqui capturas de tela dos gráficos gerados pelo Streamlit, "
    "mostrando todas as três visualizações do dashboard."
)
pdf.ln(3)

# Seção 5: Principais insights e sugestões
pdf.set_font("Arial", "B", 14)
pdf.cell(0, 10, "5. Principais Insights e Sugestões", 0, 1)
pdf.set_font("Arial", "", 12)
pdf.multi_cell(0, 8,
    "- Identificação de horários de pico de temperatura.\n"
    "- Dispositivos com leituras fora do esperado.\n"
    "- Sugestões práticas: alertas automáticos, monitoramento remoto, análise de manutenção preventiva."
)

# Salvar PDF
pdf.output("docs/relatorio_modelo.pdf")
print("PDF gerado: docs/relatorio_modelo.pdf")
